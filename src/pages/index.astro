---
import PageShell from '../components/layout/PageShell.astro'
import LangText from '../components/LangText.astro'
import { EXPERIENCE, LINKS, STACK } from '../lib/constants'
import { Image } from 'astro:assets'
import heroImg from '../../public/me_laptop.webp'
import todoLuxImg from '../../public/experience/todo-lux.webp'
import basuralezaImg from '../../public/experience/basuraleza.webp'
import solutecImg from '../../public/experience/solutec.webp'
import tcatikImg from '../../public/experience/tcatik.webp'
const experiencesEs = EXPERIENCE.es.slice(0, 3)
const experiencesEn = EXPERIENCE.en.slice(0, 3)

const experienceImages: Record<string, any> = {
  'https://projects.todo-lux.com/': todoLuxImg,
  'https://proyectolibera.org/caracterizacion-residuos/basuraleza':
    basuralezaImg,
  'https://solutec.pccom.ai/': solutecImg,
  'https://tcatik.com/': tcatikImg,
}

const experienceCards = experiencesEs.map((exp, idx) => ({
  es: exp,
  en: experiencesEn[idx],
  image: experienceImages[exp.link] || todoLuxImg,
}))
---

<PageShell
  title='Sergio Morales Rodríguez — Full Stack Developer'
  description='Full Stack portfolio of Sergio Morales Rodríguez. Backend-focused (PHP/Laravel) con TypeScript/React para entregar producto.'
  schema={{
    '@context': 'https://schema.org',
    '@type': 'Person',
    name: 'Sergio Morales Rodríguez',
    jobTitle: 'Full Stack Developer',
    sameAs: [LINKS.github, LINKS.linkedin, LINKS.twitter],
  }}
>
  <section class='relative overflow-hidden rounded-4xl border border-border bg-card p-6 text-foreground shadow-[0_20px_80px_-25px_rgba(0,0,0,0.65)] sm:p-8 lg:grid lg:grid-cols-[1.3fr_1fr] lg:items-center dark:border-white/5 dark:bg-[rgba(10,10,20,0.9)]'>
    <div class='pointer-events-none absolute inset-0 opacity-40 blur-3xl dark:opacity-70'>
      <div class='absolute -left-10 -top-8 h-48 w-48 rounded-full bg-gradient-to-br from-[#5eb1ff] to-[#7f5dff] opacity-60'></div>
      <div class='absolute right-0 top-10 h-40 w-40 rounded-full bg-gradient-to-br from-[#ffa9d1] to-[#7f5dff] opacity-50'></div>
      <div class='absolute bottom-0 left-1/4 h-36 w-36 rounded-full bg-gradient-to-br from-[#6effd4] to-[#3b82f6] opacity-35'></div>
      <div class='absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.08),transparent_40%),radial-gradient(circle_at_80%_0%,rgba(126,92,255,0.08),transparent_35%)]'></div>
    </div>
    <div class='space-y-6 relative z-10'>
      <p class='text-sm uppercase tracking-[0.25em] text-muted-foreground'>
        <LangText es='Desarrollador Full Stack' en='Full Stack Developer' />
      </p>
      <h1 class='text-4xl font-semibold leading-[1.1] sm:text-5xl text-foreground'>
        <LangText
          es='Diseño, construyo y optimizo productos digitales.'
          en='I design, build, and optimize digital products.'
        />
      </h1>
      <p class='max-w-2xl text-lg text-muted-foreground'>
        <LangText
          es='Backend first con PHP/Laravel, APIs y un toque de front con TypeScript/React. Orientado a entregar rápido y con calidad.'
          en='Backend-first with PHP/Laravel, APIs, and a front touch with TypeScript/React. Focused on shipping fast with quality.'
        />
      </p>
      <div class='flex flex-wrap items-center gap-3'>
        <a
          href='mailto:sergiogmr+portfolio@icloud.com'
          class='rounded-full bg-[linear-gradient(135deg,#5eb1ff,#7f5dff)] px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-[0_10px_40px_-18px_rgba(95,150,255,0.9)] transition hover:brightness-110'
        >
          <LangText es='Hablemos' en="Let's talk" />
        </a>
        <a
          data-lang-content='es'
          href='/sergio-morales-2024-es.pdf'
          class='rounded-full border border-border bg-background px-5 py-2 text-sm font-semibold text-foreground backdrop-blur transition hover:border-foreground/60 hover:bg-foreground/5 dark:border-white/20 dark:bg-white/5 dark:text-white dark:hover:border-white/40 dark:hover:bg-white/10'
          target='_blank'
        >
          Ver CV
        </a>
        <a
          data-lang-content='en'
          href='/sergio-morales-2024-en.pdf'
          class='rounded-full border border-border bg-background px-5 py-2 text-sm font-semibold text-foreground backdrop-blur transition hover:border-foreground/60 hover:bg-foreground/5 dark:border-white/20 dark:bg-white/5 dark:text-white dark:hover:border-white/40 dark:hover:bg-white/10'
          target='_blank'
        >
          View CV
        </a>
      </div>
      <div class='flex flex-wrap gap-2 text-xs uppercase tracking-[0.2em] text-muted-foreground'>
        {
          ['PHP', 'Laravel', 'TypeScript', 'React', 'Tailwind'].map(item => (
            <span class='rounded-full border border-border bg-background px-3 py-1 text-foreground/80 backdrop-blur shadow-sm dark:border-white/15 dark:bg-white/5 dark:text-white/80 dark:shadow-[0_1px_8px_rgba(255,255,255,0.08)]'>{item}</span>
          ))
        }
      </div>
    </div>
    <div class='relative z-10 flex justify-center'>
      <div class='absolute -left-10 top-6 h-24 w-24 rounded-full bg-[linear-gradient(140deg,#5eb1ff,#7f5dff)] blur-3xl opacity-60'></div>
      <div class='absolute right-0 -bottom-4 h-28 w-28 rounded-full bg-[linear-gradient(160deg,#ffa9d1,#7f5dff)] blur-3xl opacity-50'></div>
      <div class='relative h-full w-full max-w-md overflow-hidden rounded-3xl border border-white/15 bg-white/5 p-[1px] shadow-[0_25px_90px_-30px_rgba(0,0,0,0.7)] backdrop-blur-[18px]'>
        <Image
          src={heroImg}
          alt='Sergio working on laptop'
          class='h-full w-full rounded-[24px] object-cover'
          loading='eager'
          fetchpriority='high'
          decoding='async'
          width={900}
          height={900}
          sizes='(min-width: 1024px) 50vw, 100vw'
        />
      </div>
    </div>
  </section>

  <section class='grid gap-10 rounded-4xl border border-border bg-card p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)] backdrop-blur sm:p-10 dark:border-white/5 dark:bg-white/5'>
    <div class='flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between'>
      <div>
        <p class='text-xs uppercase tracking-[0.3em] text-muted-foreground dark:text-white/70'>
          <LangText es='Trayectoria' en='Background' />
        </p>
        <h2 class='text-2xl font-semibold sm:text-3xl text-foreground dark:text-white'>
          <LangText es='Experiencia seleccionada' en='Selected experience' />
        </h2>
      </div>
      <a
        href='https://www.linkedin.com/in/sergiogmr'
        class='text-sm font-semibold text-primary underline-offset-4 hover:underline'
      >
        LinkedIn
      </a>
    </div>
    <div class='grid gap-6 md:grid-cols-2'>
      {
        EXPERIENCE.es.slice(0, 4).map((exp, idx) => (
          <article data-lang-content='es' class='rounded-2xl border border-border bg-card p-6 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)] transition hover:-translate-y-1 hover:border-foreground/30 hover:bg-foreground/5 dark:border-white/10 dark:bg-white/5 dark:hover:border-white/25 dark:hover:bg-white/10'>
            <div class='flex items-center justify-between'>
              <p class='text-xs uppercase tracking-[0.2em] text-muted-foreground dark:text-white/60'>{exp.start} — {exp.end}</p>
              <span class='rounded-full border border-border bg-primary/20 px-3 py-1 text-[11px] font-semibold text-foreground dark:border-white/20 dark:text-white'>
                {idx === 0 ? 'Actual' : 'Freelance'}
              </span>
            </div>
            <h3 class='mt-3 text-xl font-semibold text-foreground dark:text-white'>{exp.position}</h3>
            <a class='text-sm text-primary underline-offset-4 hover:underline' href={exp.link}>{exp.company}</a>
            <ul class='mt-4 flex list-disc flex-col gap-2 pl-4 text-sm text-muted-foreground dark:text-white/70'>
              {exp.tasks.slice(0, 3).map(item => <li>{item}</li>)}
            </ul>
          </article>
        ))
      }
      {
        EXPERIENCE.en.slice(0, 4).map((exp, idx) => (
          <article data-lang-content='en' class='rounded-2xl border border-border bg-card p-6 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)] transition hover:-translate-y-1 hover:border-foreground/30 hover:bg-foreground/5 dark:border-white/10 dark:bg-white/5 dark:hover:border-white/25 dark:hover:bg-white/10'>
            <div class='flex items-center justify-between'>
              <p class='text-xs uppercase tracking-[0.2em] text-muted-foreground dark:text-white/60'>{exp.start} — {exp.end}</p>
              <span class='rounded-full border border-border bg-primary/20 px-3 py-1 text-[11px] font-semibold text-foreground dark:border-white/20 dark:text-white'>
                {idx === 0 ? 'Current' : 'Freelance'}
              </span>
            </div>
            <h3 class='mt-3 text-xl font-semibold text-foreground dark:text-white'>{exp.position}</h3>
            <a class='text-sm text-primary underline-offset-4 hover:underline' href={exp.link}>{exp.company}</a>
            <ul class='mt-4 flex list-disc flex-col gap-2 pl-4 text-sm text-muted-foreground dark:text-white/70'>
              {exp.tasks.slice(0, 3).map(item => <li>{item}</li>)}
            </ul>
          </article>
        ))
      }
    </div>
  </section>

  <section class='grid gap-6 rounded-4xl border border-border bg-card p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)] backdrop-blur sm:p-10 lg:grid-cols-[1.1fr_1fr] dark:border-white/5 dark:bg-white/5'>
    <div class='space-y-4'>
      <p class='text-xs uppercase tracking-[0.3em] text-muted-foreground dark:text-white/70'>
        <LangText es='Skills' en='Skills' />
      </p>
      <h2 class='text-2xl font-semibold sm:text-3xl text-foreground dark:text-white'>
        <LangText es='Stack y enfoque' en='Stack and focus' />
      </h2>
      <p class='text-muted-foreground dark:text-white/70'>
        <LangText
          es='Foco en backend escalable y APIs limpias. Priorizo flujos claros de entrega y comunicación con negocio.'
          en='Focus on scalable backend and clean APIs. I prioritize clear delivery flows and business alignment.'
        />
      </p>
      <div class='flex flex-wrap gap-2'>
        {STACK.map(item => (
          <span class='rounded-full border border-border bg-background px-3 py-1 text-sm text-foreground/80 backdrop-blur dark:border-white/15 dark:bg-white/5 dark:text-white/80'>{item}</span>
        ))}
      </div>
    </div>
    <div class='grid grid-cols-1 gap-4 sm:grid-cols-2'>
      <div class='rounded-2xl border border-border bg-card p-5 backdrop-blur shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)] dark:border-white/10 dark:bg-white/5 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.7)]'>
        <p class='text-xs uppercase tracking-[0.3em] text-muted-foreground dark:text-white/70'>
          <LangText es='Backend' en='Backend' />
        </p>
        <p class='mt-2 text-lg font-semibold text-foreground dark:text-white'>PHP · Laravel · APIs</p>
        <p class='text-sm text-muted-foreground dark:text-white/70'>
          <LangText es='Arquitectura hexagonal, colas, eventos, auth.' en='Hexagonal architecture, queues, events, auth.' />
        </p>
      </div>
      <div class='rounded-2xl border border-border bg-card p-5 backdrop-blur shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)] dark:border-white/10 dark:bg-white/5 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.7)]'>
        <p class='text-xs uppercase tracking-[0.3em] text-muted-foreground dark:text-white/70'>Frontend</p>
        <p class='mt-2 text-lg font-semibold text-foreground dark:text-white'>TypeScript · React</p>
        <p class='text-sm text-muted-foreground dark:text-white/70'>
          <LangText es='UI accesible con Tailwind, componentes a medida.' en='Accessible UI with Tailwind, custom components.' />
        </p>
      </div>
      <div class='rounded-2xl border border-border bg-card p-5 backdrop-blur shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)] dark:border-white/10 dark:bg-white/5 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.7)]'>
        <p class='text-xs uppercase tracking-[0.3em] text-muted-foreground dark:text-white/70'>
          <LangText es='Comunicación' en='Communication' />
        </p>
        <p class='mt-2 text-lg font-semibold text-foreground dark:text-white'>
          <LangText es='Negocio & producto' en='Business & product' />
        </p>
        <p class='text-sm text-muted-foreground dark:text-white/70'>
          <LangText es='Traducción de requisitos a entregables medibles.' en='Translate requirements into measurable deliverables.' />
        </p>
      </div>
    </div>
  </section>

  <section class='grid gap-6 rounded-4xl border border-border bg-card p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)] backdrop-blur sm:p-10 dark:border-white/5 dark:bg-white/5'>
    <div class='flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between'>
      <div>
        <p class='text-xs uppercase tracking-[0.3em] text-muted-foreground dark:text-white/70'>
          <LangText es='Proyectos' en='Projects' />
        </p>
        <h2 class='text-2xl font-semibold sm:text-3xl text-foreground dark:text-white'>
          <LangText es='Trabajo reciente' en='Recent work' />
        </h2>
      </div>
    </div>
    <div class='grid gap-4 md:grid-cols-3'>
      {
        experienceCards.map((card, idx) => (
          <a
            href={card.es.link}
            target='_blank'
            rel='noreferrer noopener'
            class='group block rounded-2xl border border-border bg-card p-4 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)] backdrop-blur transition hover:-translate-y-1 hover:border-foreground/30 hover:bg-foreground/5 dark:border-white/10 dark:bg-white/5 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.8)] dark:hover:border-white/25 dark:hover:bg-white/10'
          >
            <div class='relative mb-4 overflow-hidden rounded-xl border border-border bg-muted/40 dark:border-white/10 dark:bg-white/5'>
              <Image
                src={card.image}
                alt={card.es.company}
                class='h-40 w-full object-cover transition duration-300 group-hover:scale-105'
                loading='lazy'
                decoding='async'
                width={900}
                height={560}
                sizes='(min-width: 768px) 33vw, 100vw'
              />
            </div>
            <div data-lang-content='es' class='space-y-2'>
              <div class='flex items-center justify-between'>
                <h3 class='text-lg font-semibold text-foreground dark:text-white'>{card.es.company}</h3>
                <span class='text-sm text-primary'>→</span>
              </div>
              <p class='text-sm font-semibold text-foreground dark:text-white/90'>{card.es.position}</p>
              <p class='text-xs uppercase tracking-[0.18em] text-muted-foreground dark:text-white/60'>
                {card.es.start} — {card.es.end}
              </p>
              <p class='text-sm text-muted-foreground dark:text-white/70'>
                {card.es.tasks.slice(0, 2).join(' • ')}
              </p>
            </div>
            <div data-lang-content='en' class='space-y-2'>
              <div class='flex items-center justify-between'>
                <h3 class='text-lg font-semibold text-foreground dark:text-white'>{card.en?.company}</h3>
                <span class='text-sm text-primary'>→</span>
              </div>
              <p class='text-sm font-semibold text-foreground dark:text-white/90'>{card.en?.position}</p>
              <p class='text-xs uppercase tracking-[0.18em] text-muted-foreground dark:text-white/60'>
                {card.en?.start} — {card.en?.end}
              </p>
              <p class='text-sm text-muted-foreground dark:text-white/70'>
                {card.en?.tasks?.slice(0, 2).join(' • ')}
              </p>
            </div>
            <div class='mt-4 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground dark:text-white/60'>
              <span class='rounded-full border border-border bg-background px-2 py-1 backdrop-blur dark:border-white/20 dark:bg-white/5'>{idx === 0 ? 'Live' : 'Project'}</span>
            </div>
          </a>
        ))
      }
    </div>
  </section>

  <section class='grid gap-6 rounded-4xl border border-white/5 bg-white/5 p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)] backdrop-blur sm:p-10 lg:grid-cols-[1.1fr_1fr]'>
    <div class='space-y-4'>
      <p class='text-xs uppercase tracking-[0.3em] text-white/70'>
        <LangText es='Sobre mí' en='About' />
      </p>
      <h2 class='text-2xl font-semibold sm:text-3xl text-white'>
        <LangText es='Colaboro de forma cercana y pragmática.' en='I collaborate closely and pragmatically.' />
      </h2>
      <p class='text-white/75'>
        <LangText
          es='Me gusta entrar en proyectos con contexto, mapear riesgos, definir métricas y entregar rápido. Hablo con negocio y con ingeniería.'
          en='I like to enter projects with context, map risks, define metrics, and ship fast. I talk with business and engineering.'
        />
      </p>
      <div class='rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/75 backdrop-blur shadow-[0_12px_40px_-28px_rgba(0,0,0,0.7)]'>
        <LangText
          es='Ubicado en Islas Canarias (UTC+0/+1). Trabajo remoto y asincrónico con equipos distribuidos.'
          en='Based in Canary Islands (UTC+0/+1). Remote and async with distributed teams.'
        />
      </div>
    </div>
    <div class='rounded-3xl border border-white/10 bg-white/5 p-6 backdrop-blur shadow-[0_15px_50px_-30px_rgba(0,0,0,0.8)]'>
      <p class='text-xs uppercase tracking-[0.25em] text-white/70'>
        <LangText es='Contacto' en='Contact' />
      </p>
      <div class='mt-4 space-y-3'>
        <div class='flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white/80'>
          <span class='text-sm'>
            <LangText es='Email' en='Email' />
          </span>
          <a class='font-semibold text-white hover:underline' href='mailto:sergiogmr+portfolio@icloud.com'>sergiogmr@icloud.com</a>
        </div>
        <div class='flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white/80'>
          <span class='text-sm'>LinkedIn</span>
          <a class='font-semibold text-white hover:underline' href='https://www.linkedin.com/in/sergiogmr' target='_blank'>@sergiogmr</a>
        </div>
        <div class='flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white/80'>
          <span class='text-sm'>GitHub</span>
          <a class='font-semibold text-white hover:underline' href='https://github.com/sergiogmr' target='_blank'>@sergiogmr</a>
        </div>
      </div>
    </div>
  </section>
</PageShell>
