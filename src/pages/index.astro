---
import PageShell from '../components/layout/PageShell.astro'
import LangText from '../components/LangText.astro'
import { EXPERIENCE, LINKS, STACK } from '../lib/constants'
import { Image } from 'astro:assets'
import heroImg from '../../public/me_laptop.webp'
import todoLuxImg from '../../public/experience/todo-lux.webp'
import basuralezaImg from '../../public/experience/basuraleza.webp'
import solutecImg from '../../public/experience/solutec.webp'
import tcatikImg from '../../public/experience/tcatik.webp'
const experiencesEs = EXPERIENCE.es.slice(0, 3)
const experiencesEn = EXPERIENCE.en.slice(0, 3)

const experienceImages: Record<string, any> = {
  'https://projects.todo-lux.com/': todoLuxImg,
  'https://proyectolibera.org/caracterizacion-residuos/basuraleza':
    basuralezaImg,
  'https://solutec.pccom.ai/': solutecImg,
  'https://tcatik.com/': tcatikImg,
}

const experienceCards = experiencesEs.map((exp, idx) => ({
  es: exp,
  en: experiencesEn[idx],
  image: experienceImages[exp.link] || todoLuxImg,
}))
---

<PageShell
  title="Sergio Morales Rodríguez — Full Stack Developer"
  description="Full Stack portfolio of Sergio Morales Rodríguez. Backend-focused (PHP/Laravel) con TypeScript/React para entregar producto."
  schema={{
    '@context': 'https://schema.org',
    '@type': 'Person',
    name: 'Sergio Morales Rodríguez',
    jobTitle: 'Full Stack Developer',
    sameAs: [LINKS.github, LINKS.linkedin, LINKS.twitter],
  }}
>
  <section
    class="border-border hero-bg text-foreground relative overflow-hidden rounded-4xl border p-6 shadow-[0_20px_80px_-25px_rgba(0,0,0,0.15)] sm:p-8 lg:grid lg:grid-cols-[1.3fr_1fr] lg:items-center dark:shadow-[0_20px_80px_-25px_rgba(0,0,0,0.5)]"
  >
    <div
      class="pointer-events-none absolute inset-0 opacity-30 blur-3xl dark:opacity-70"
    >
      <div
        class="absolute -top-8 -left-10 h-48 w-48 rounded-full bg-gradient-to-br from-[#5eb1ff] to-[#7f5dff] opacity-60"
      >
      </div>
      <div
        class="absolute top-10 right-0 h-40 w-40 rounded-full bg-gradient-to-br from-[#ffa9d1] to-[#7f5dff] opacity-50"
      >
      </div>
      <div
        class="absolute bottom-0 left-1/4 h-36 w-36 rounded-full bg-gradient-to-br from-[#6effd4] to-[#3b82f6] opacity-35"
      >
      </div>
      <div
        class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(0,0,0,0.04),transparent_40%),radial-gradient(circle_at_80%_0%,rgba(126,92,255,0.06),transparent_35%)] dark:bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.08),transparent_40%),radial-gradient(circle_at_80%_0%,rgba(126,92,255,0.08),transparent_35%)]"
      >
      </div>
    </div>
    <div class="relative z-10 space-y-6">
      <p class="text-muted-foreground text-sm tracking-[0.25em] uppercase">
        <LangText es="Desarrollador Full Stack" en="Full Stack Developer" />
      </p>
      <h1
        class="text-foreground text-4xl leading-[1.1] font-semibold sm:text-5xl"
      >
        <LangText
          es="Diseño, construyo y optimizo productos digitales."
          en="I design, build, and optimize digital products."
        />
      </h1>
      <p class="text-muted-foreground max-w-2xl text-lg">
        <LangText
          es="Backend first con PHP/Laravel, APIs y un toque de front con TypeScript/React. Orientado a entregar rápido y con calidad."
          en="Backend-first with PHP/Laravel, APIs, and a front touch with TypeScript/React. Focused on shipping fast with quality."
        />
      </p>
      <div class="flex flex-wrap items-center gap-3">
        <a
          href="mailto:sergiogmr+portfolio@icloud.com"
          class="rounded-full bg-[linear-gradient(135deg,#5eb1ff,#7f5dff)] px-5 py-2 text-sm font-semibold text-white shadow-[0_10px_40px_-18px_rgba(95,150,255,0.9)] shadow-lg transition hover:brightness-110"
        >
          <LangText es="Hablemos" en="Let's talk" />
        </a>
        <a
          data-lang-content="es"
          href="/sergio-morales-2024-es.pdf"
          class="border-border bg-card/80 text-foreground hover:border-foreground/30 hover:bg-card rounded-full border px-5 py-2 text-sm font-semibold backdrop-blur transition"
          target="_blank"
        >
          Ver CV
        </a>
        <a
          data-lang-content="en"
          href="/sergio-morales-2024-en.pdf"
          class="border-border bg-card/80 text-foreground hover:border-foreground/30 hover:bg-card rounded-full border px-5 py-2 text-sm font-semibold backdrop-blur transition"
          target="_blank"
        >
          View CV
        </a>
      </div>
      <div
        class="text-muted-foreground flex flex-wrap gap-2 text-xs tracking-[0.2em] uppercase"
      >
        {
          ['PHP', 'Laravel', 'TypeScript', 'React', 'Tailwind'].map((item) => (
            <span class="border-border bg-card/60 text-foreground/80 rounded-full border px-3 py-1 shadow-sm backdrop-blur">
              {item}
            </span>
          ))
        }
      </div>
    </div>
    <div class="relative z-10 flex justify-center">
      <div
        class="absolute top-6 -left-10 h-24 w-24 rounded-full bg-[linear-gradient(140deg,#5eb1ff,#7f5dff)] opacity-60 blur-3xl"
      >
      </div>
      <div
        class="absolute right-0 -bottom-4 h-28 w-28 rounded-full bg-[linear-gradient(160deg,#ffa9d1,#7f5dff)] opacity-50 blur-3xl"
      >
      </div>
      <div
        class="border-border bg-card/20 relative h-full w-full max-w-md overflow-hidden rounded-3xl border p-[1px] shadow-[0_25px_90px_-30px_rgba(0,0,0,0.2)] backdrop-blur-[18px] dark:shadow-[0_25px_90px_-30px_rgba(0,0,0,0.7)]"
      >
        <Image
          src={heroImg}
          alt="Sergio working on laptop"
          class="h-full w-full rounded-[24px] object-cover"
          loading="eager"
          fetchpriority="high"
          decoding="async"
          width={900}
          height={900}
          sizes="(min-width: 1024px) 50vw, 100vw"
        />
      </div>
    </div>
  </section>

  <section
    class="border-border bg-card text-foreground grid gap-10 rounded-4xl border p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.1)] backdrop-blur sm:p-10 dark:shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)]"
  >
    <div
      class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"
    >
      <div>
        <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
          <LangText es="Trayectoria" en="Background" />
        </p>
        <h2 class="text-foreground text-2xl font-semibold sm:text-3xl">
          <LangText es="Experiencia seleccionada" en="Selected experience" />
        </h2>
      </div>
      <a
        href="https://www.linkedin.com/in/sergiogmr"
        class="text-primary text-sm font-semibold underline-offset-4 hover:underline"
      >
        LinkedIn
      </a>
    </div>
    <div class="grid gap-6 md:grid-cols-2">
      {
        EXPERIENCE.es.slice(0, 4).map((exp, idx) => (
          <article
            data-lang-content="es"
            class="border-border bg-card text-foreground hover:border-foreground/20 hover:bg-muted rounded-2xl border p-6 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] transition hover:-translate-y-1 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)]"
          >
            <div class="flex items-center justify-between">
              <p class="text-muted-foreground text-xs tracking-[0.2em] uppercase">
                {exp.start} — {exp.end}
              </p>
              <span class="border-border bg-primary/20 text-foreground rounded-full border px-3 py-1 text-[11px] font-semibold">
                {idx === 0 ? 'Actual' : 'Freelance'}
              </span>
            </div>
            <h3 class="text-foreground mt-3 text-xl font-semibold">
              {exp.position}
            </h3>
            <a
              class="text-primary text-sm underline-offset-4 hover:underline"
              href={exp.link}
            >
              {exp.company}
            </a>
            <ul class="text-muted-foreground mt-4 flex list-disc flex-col gap-2 pl-4 text-sm">
              {exp.tasks.slice(0, 3).map((item) => (
                <li>{item}</li>
              ))}
            </ul>
          </article>
        ))
      }
      {
        EXPERIENCE.en.slice(0, 4).map((exp, idx) => (
          <article
            data-lang-content="en"
            class="border-border bg-card text-foreground hover:border-foreground/20 hover:bg-muted rounded-2xl border p-6 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] transition hover:-translate-y-1 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.4)]"
          >
            <div class="flex items-center justify-between">
              <p class="text-muted-foreground text-xs tracking-[0.2em] uppercase">
                {exp.start} — {exp.end}
              </p>
              <span class="border-border bg-primary/20 text-foreground rounded-full border px-3 py-1 text-[11px] font-semibold">
                {idx === 0 ? 'Current' : 'Freelance'}
              </span>
            </div>
            <h3 class="text-foreground mt-3 text-xl font-semibold">
              {exp.position}
            </h3>
            <a
              class="text-primary text-sm underline-offset-4 hover:underline"
              href={exp.link}
            >
              {exp.company}
            </a>
            <ul class="text-muted-foreground mt-4 flex list-disc flex-col gap-2 pl-4 text-sm">
              {exp.tasks.slice(0, 3).map((item) => (
                <li>{item}</li>
              ))}
            </ul>
          </article>
        ))
      }
    </div>
  </section>

  <section
    class="border-border bg-card text-foreground grid gap-6 rounded-4xl border p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.1)] backdrop-blur sm:p-10 lg:grid-cols-[1.1fr_1fr] dark:shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)]"
  >
    <div class="space-y-4">
      <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
        <LangText es="Skills" en="Skills" />
      </p>
      <h2 class="text-foreground text-2xl font-semibold sm:text-3xl">
        <LangText es="Stack y enfoque" en="Stack and focus" />
      </h2>
      <p class="text-muted-foreground">
        <LangText
          es="Foco en backend escalable y APIs limpias. Priorizo flujos claros de entrega y comunicación con negocio."
          en="Focus on scalable backend and clean APIs. I prioritize clear delivery flows and business alignment."
        />
      </p>
      <div class="flex flex-wrap gap-2">
        {
          STACK.map((item) => (
            <span class="border-border bg-card/60 text-foreground/80 rounded-full border px-3 py-1 text-sm backdrop-blur">
              {item}
            </span>
          ))
        }
      </div>
    </div>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
      <div
        class="border-border bg-card text-foreground rounded-2xl border p-5 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] backdrop-blur dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.5)]"
      >
        <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
          <LangText es="Backend" en="Backend" />
        </p>
        <p class="text-foreground mt-2 text-lg font-semibold">
          PHP · Laravel · APIs
        </p>
        <p class="text-muted-foreground text-sm">
          <LangText
            es="Arquitectura hexagonal, colas, eventos, auth."
            en="Hexagonal architecture, queues, events, auth."
          />
        </p>
      </div>
      <div
        class="border-border bg-card text-foreground rounded-2xl border p-5 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] backdrop-blur dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.5)]"
      >
        <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
          Frontend
        </p>
        <p class="text-foreground mt-2 text-lg font-semibold">
          TypeScript · React
        </p>
        <p class="text-muted-foreground text-sm">
          <LangText
            es="UI accesible con Tailwind, componentes a medida."
            en="Accessible UI with Tailwind, custom components."
          />
        </p>
      </div>
      <div
        class="border-border bg-card text-foreground rounded-2xl border p-5 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] backdrop-blur dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.5)]"
      >
        <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
          <LangText es="Comunicación" en="Communication" />
        </p>
        <p class="text-foreground mt-2 text-lg font-semibold">
          <LangText es="Negocio & producto" en="Business & product" />
        </p>
        <p class="text-muted-foreground text-sm">
          <LangText
            es="Traducción de requisitos a entregables medibles."
            en="Translate requirements into measurable deliverables."
          />
        </p>
      </div>
      <div
        class="border-border bg-card text-foreground rounded-2xl border p-5 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] backdrop-blur dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.5)]"
      >
        <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
          <LangText es="Soft Skills" en="Soft Skills" />
        </p>
        <p class="text-foreground mt-2 text-lg font-semibold">
          <LangText es="Resolución de problemas" en="Problem solving" />
        </p>
        <p class="text-muted-foreground text-sm">
          <LangText
            es="Análisis, debugging y toma de decisiones técnicas."
            en="Analysis, debugging, and technical decision-making."
          />
        </p>
      </div>
    </div>
  </section>

  <section
    class="border-border bg-card text-foreground grid gap-6 rounded-4xl border p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.1)] backdrop-blur sm:p-10 dark:shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)]"
  >
    <div
      class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"
    >
      <div>
        <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
          <LangText es="Proyectos" en="Projects" />
        </p>
        <h2 class="text-foreground text-2xl font-semibold sm:text-3xl">
          <LangText es="Trabajo reciente" en="Recent work" />
        </h2>
      </div>
    </div>
    <div class="grid gap-4 md:grid-cols-3">
      {
        experienceCards.map((card, idx) => (
          <a
            href={card.es.link}
            target="_blank"
            rel="noreferrer noopener"
            class="group border-border bg-card text-foreground hover:border-foreground/20 hover:bg-muted block rounded-2xl border p-4 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.08)] backdrop-blur transition hover:-translate-y-1 dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.5)]"
          >
            <div class="border-border bg-muted/40 relative mb-4 overflow-hidden rounded-xl border">
              <Image
                src={card.image}
                alt={card.es.company}
                class="h-40 w-full object-cover transition duration-300 group-hover:scale-105"
                loading="lazy"
                decoding="async"
                width={900}
                height={560}
                sizes="(min-width: 768px) 33vw, 100vw"
              />
            </div>
            <div data-lang-content="es" class="space-y-2">
              <div class="flex items-center justify-between">
                <h3 class="text-foreground text-lg font-semibold">
                  {card.es.company}
                </h3>
                <span class="text-primary text-sm">→</span>
              </div>
              <p class="text-foreground/90 text-sm font-semibold">
                {card.es.position}
              </p>
              <p class="text-muted-foreground text-xs tracking-[0.18em] uppercase">
                {card.es.start} — {card.es.end}
              </p>
              <p class="text-muted-foreground text-sm">
                {card.es.tasks.slice(0, 2).join(' • ')}
              </p>
            </div>
            <div data-lang-content="en" class="space-y-2">
              <div class="flex items-center justify-between">
                <h3 class="text-foreground text-lg font-semibold">
                  {card.en?.company}
                </h3>
                <span class="text-primary text-sm">→</span>
              </div>
              <p class="text-foreground/90 text-sm font-semibold">
                {card.en?.position}
              </p>
              <p class="text-muted-foreground text-xs tracking-[0.18em] uppercase">
                {card.en?.start} — {card.en?.end}
              </p>
              <p class="text-muted-foreground text-sm">
                {card.en?.tasks?.slice(0, 2).join(' • ')}
              </p>
            </div>
            <div class="text-muted-foreground mt-4 flex flex-wrap gap-2 text-[11px] font-semibold tracking-[0.18em] uppercase">
              <span class="border-border bg-card/60 rounded-full border px-2 py-1 backdrop-blur">
                {idx === 0 ? 'Live' : 'Project'}
              </span>
            </div>
          </a>
        ))
      }
    </div>
  </section>

  <section
    class="border-border bg-card text-foreground grid gap-6 rounded-4xl border p-8 shadow-[0_20px_70px_-30px_rgba(0,0,0,0.1)] backdrop-blur sm:p-10 lg:grid-cols-[1.1fr_1fr] dark:shadow-[0_20px_70px_-30px_rgba(0,0,0,0.6)]"
  >
    <div class="space-y-4">
      <p class="text-muted-foreground text-xs tracking-[0.3em] uppercase">
        <LangText es="Sobre mí" en="About" />
      </p>
      <h2 class="text-foreground text-2xl font-semibold sm:text-3xl">
        <LangText
          es="Colaboro de forma cercana y pragmática."
          en="I collaborate closely and pragmatically."
        />
      </h2>
      <p class="text-muted-foreground">
        <LangText
          es="Me gusta entrar en proyectos con contexto, mapear riesgos, definir métricas y entregar rápido. Hablo con negocio y con ingeniería."
          en="I like to enter projects with context, map risks, define metrics, and ship fast. I talk with business and engineering."
        />
      </p>
      <div
        class="border-border bg-muted/50 text-muted-foreground rounded-2xl border p-4 text-sm shadow-[0_12px_40px_-28px_rgba(0,0,0,0.1)] backdrop-blur dark:shadow-[0_12px_40px_-28px_rgba(0,0,0,0.5)]"
      >
        <LangText
          es="Ubicado en Islas Canarias (UTC+0/+1). Trabajo remoto y asincrónico con equipos distribuidos."
          en="Based in Canary Islands (UTC+0/+1). Remote and async with distributed teams."
        />
      </div>
    </div>
    <div
      class="border-border bg-card text-foreground rounded-3xl border p-6 shadow-[0_15px_50px_-30px_rgba(0,0,0,0.1)] backdrop-blur dark:shadow-[0_15px_50px_-30px_rgba(0,0,0,0.6)]"
    >
      <p class="text-muted-foreground text-xs tracking-[0.25em] uppercase">
        <LangText es="Contacto" en="Contact" />
      </p>
      <div class="mt-4 space-y-3">
        <div
          class="border-border bg-muted/30 text-foreground flex items-center justify-between rounded-2xl border px-4 py-3"
        >
          <span class="text-sm">
            <LangText es="Email" en="Email" />
          </span>
          <a
            class="font-semibold hover:underline"
            href="mailto:sergiogmr+portfolio@icloud.com">sergiogmr@icloud.com</a
          >
        </div>
        <div
          class="border-border bg-muted/30 text-foreground flex items-center justify-between rounded-2xl border px-4 py-3"
        >
          <span class="text-sm">LinkedIn</span>
          <a
            class="font-semibold hover:underline"
            href="https://www.linkedin.com/in/sergiogmr"
            target="_blank">@sergiogmr</a
          >
        </div>
        <div
          class="border-border bg-muted/30 text-foreground flex items-center justify-between rounded-2xl border px-4 py-3"
        >
          <span class="text-sm">GitHub</span>
          <a
            class="font-semibold hover:underline"
            href="https://github.com/sergiogmr"
            target="_blank">@sergiogmr</a
          >
        </div>
      </div>
    </div>
  </section>
</PageShell>
